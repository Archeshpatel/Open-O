<?xml version="1.0"?>
<project default="codeCheck">
	<!--
		For now we custom wrote out own checks because what we want to do is almost trivial.
		Once we get the code base cleaned up and want to take it further, we should
		switch to using "checkstyle" instead, it's available for both
		maven and ant. The ant version is here : checkstyle.sourceforge.net
	-->

	<property name="srcDir" location="../web" />

	<path id="codeCheckClassPath">
		<fileset dir="../web/WEB-INF/lib">
			<include name="*.jar" />
		</fileset>
		<fileset dir="tasks/lib">
			<include name="*.jar" />
		</fileset>
		<pathelement location="tasks/classes" />
	</path>

	<target name="codeCheck">
		<delete>
			<fileset dir="tasks/classes" includes="**/*.class" />
		</delete>
		<javac srcdir="tasks/src" destdir="tasks/classes" debug="on">
			<classpath refid="codeCheckClassPath" />
		</javac>

		<taskdef name="GrepStuffAntTask" classname="GrepStuffAntTask">
			<classpath refid="codeCheckClassPath" />
		</taskdef>

		<GrepStuffAntTask srcDir="../web" dataFile="grep_check.data" />
	</target>

</project>